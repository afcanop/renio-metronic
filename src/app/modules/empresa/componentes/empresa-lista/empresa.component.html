<div class="row">
  <!--begin::Col-->
  <div class="col-xl-12">
    <!--begin::Tables Widget 9-->
    <div class="card card-xl-stretch mb-5 mb-xl-8">
      <!--begin::Header-->
      <div class="card-header">
        <div class="card-title m-0">
          <h3 class="fw-bolder m-0">Empresas</h3>
        </div>
        <a
          routerlink="/crafted/account/settings"
          class="btn btn-primary align-self-center"
          ng-reflect-router-link="/crafted/account/settings"
          [routerLink]="['../nuevo']"
        >
          Nuevo
        </a>
      </div>
      <div class="card-body">
        <!--begin::Table container-->
        <div class="table-responsive-sm">
          <!--begin::Table-->
          <table class="table table-row-dashed table-row-gray-300">
            <!--begin::Table head-->
            <!-- <thead>
              <tr class="fw-bolder text-muted">
                <th class="min-w-100px">ID</th>
                <th class="min-w-150px">Empresa</th>
                <th class="min-w-50px"></th>
                <th class="min-w-100px"></th>
              </tr>
            </thead> -->
            <tbody>
              <ng-container *ngIf="arrEmpresas.length > 0; else sinEmpresas">
                <tr
                  *ngFor="let empresa of arrEmpresas"
                  style="height: calc(82px - 0.6rem) !important"
                >
                  <!-- <td>
                    <span class="text-muted fw-bold text-muted d-block fs-7">{{
                      empresa.id
                    }}</span>
                  </td> -->
                  <td style="width: 120px">
                    <ng-container *ngIf="empresa.imagen">
                      <img
                        src="{{ empresa.imagen }}"
                        alt="LOGO"
                        style="
                          width: auto;
                          height: auto;
                          max-height: 35px;
                          max-width: 120px;
                        "
                      />
                    </ng-container>
                  </td>
                  <td>
                    <p class="text-dark fw-bolder fs-6">
                      {{ empresa.nombre }}
                      <small class="badge badge-light-primary fs-8 fw-bold">{{
                        empresa.rol
                      }}</small>
                    </p>

                    <span class="text-muted fw-bold text-muted d-block fs-7"
                      >{{ empresa.subdominio }}.muup.online</span
                    >
                  </td>
                  <td class="w-50px text-end">
                    <button
                      href="#"
                      class="btn btn-bg-primary btn-color-white"
                      (click)="seleccionarEmpresa(empresa.empresa_id)"
                    >
                      Conectar
                    </button>
                  </td>
                  <td class="w-50px">
                    <div
                      ngbDropdown
                      class="d-inline-block"
                      *ngIf="empresa.rol === 'propietario'"
                    >
                      <button
                        type="button"
                        class="btn btn-link text-hover-primary"
                        id="dropdownBasic1"
                        ngbDropdownToggle
                      >
                        <i class="bi bi-three-dots-vertical fs-2x"></i>
                      </button>
                      <div
                        class="menu menu menu-sub menu-sub-dropdown menu-column menu-rounded menu-gray-800 menu-state-bg-light-primary w-200px py-3"
                        ngbDropdownMenu
                        aria-labelledby="dropdownBasic1"
                      >
                        <div class="menu-item px-3">
                          <a
                            [routerLink]="[
                              '/empresa/' +
                                empresa.empresa_id +
                                '/invitacion/nuevo'
                            ]"
                            class="menu-link px-3 cursor-pointer"
                            ngbDropdownItem
                          >
                            Invitaciones
                          </a>
                        </div>
                        <div class="separator my-2"></div>
                          <app-empresa-editar [empresa_id]="empresa.empresa_id"></app-empresa-editar>
                        <div class="separator my-2"></div>
                        <div class="menu-item px-3">
                          <a
                            class="menu-link px-3 cursor-pointer bg-hover-light-danger text-danger"
                            (click)="eliminarEmpresa(empresa.empresa_id)"
                          >
                            Eliminar
                          </a>
                        </div>
                        <div class="separator my-2"></div>
                      </div>
                    </div>
                  </td>
                </tr>
              </ng-container>
              <ng-template #sinEmpresas>
                <tr>
                  <td colspan="4">No cuenta con empresas creadas</td>
                </tr>
              </ng-template>
            </tbody>
          </table>
        </div>
      </div>
      <!--begin::Body-->
    </div>
    <!--end::Tables Widget 9-->
  </div>
  <!--end::Col-->
</div>
